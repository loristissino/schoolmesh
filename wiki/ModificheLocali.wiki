#summary Modifiche e personalizzazioni locali
#labels Phase-Deploy

= Modifiche e personalizzazioni locali =

Le più importanti modifiche riguardano le modalità di accesso al database e di autenticazione. 

I file da prendere in considerazione sono:

  * _apps/frontend/config/app.yml_ (configurazione dell'applicazione di frontend)
  * _apps/backend/config/app.yml_ (configurazione dell'applicazione di backend)
  * _config/databases.yml_ (accesso ai database)

*Attenzione*: questi file vengono sovrascritti con gli aggiornamenti, per cui è importante farsene una copia di sicurezza (ad esempio, in _/etc/schoolmesh_.

== Autenticazione ==

L'autenticazione degli utenti può avvenire secondo modalità personalizzabili.

Nei file __app.yml__ è indicata la funzione da chiamare per verificare la correttezza della coppia username/password:

{{{
  sf_guard_plugin:
    check_password_callable: [Authentication, testOnly]

# to validate the user, the function testOnly() in the Authentication class will be used
# comment this line to use standard authentication (against the db)

# or choose one of the following functions:
# testOnly: all users are authenticated whatever password (but null) they provide
# checkLdapPassword: users are authenticated against a LDAP server, specified in the lines below
# checkSambaPassword: users are authenticated against a Samba server (probably working also against a Windows authentication server)

  authentication:
    ldap:
      host: localhost
      domain: dc=example,dc=com
    samba:
      share: //example/homes
      address: 192.168.1.1
}}}

Se si vuole un'autenticazione basata sul DB, è sufficiente "disabilitare" le due righe:

{{{
#  sf_guard_plugin:
#    check_password_callable: [Authentication, testOnly]
}}}

Altrimenti, cambiare il nome della funzione di autenticazione da usare, scegliendone una tra quelle indicate, e fornendo i dettagli sotto.

== Personalizzazione del layout e dell'interfaccia generale ==

Ogni scuola può personanalizzare secondo le proprie esigenze diverse cose. Alcune personalizzazioni possono essere fatte direttamente modificando i file _app.yml_:

Per l'ITC Mattiussi ci sono queste voci:

{{{
  school:
    name:           ITC Mattiussi
    town:           Pordenone
    website:        'http://www.itcmattiussi.it'

  mail:
    webmaster:      loris.tissino@mattiussilab.net
    
  config:
    current_year:   2008  # only the first of the two years of a scholastic/academic year
    culture: it
    posix_homedir: /home/testhome 
    posix_basefolder: Mattiussi  # this folder contains symbolic links and other stuff; should be present in each homedir
    teachers_default_posix_group: docenti
    students_default_posix_group: allievi
    class_teachersteam_prefix: cdc  # for the new team of teachers automatically created, and the name will be prefixed with this
    class_teachersteam_name: Consiglio di classe
    googleapps_domain: mattiussilab.net
    googleapps_url: http://webmail.mattiussilab.net
}}}

Il logo è nel file _web/images/logo.png_.

Il layout principale della pagina è nel file _apps/frontend/templates/layout_orig.php_.
Piuttosto di cambiare questo, è preferibile creare un layout diverso e far puntare il link simbolico _apps/frontend/templates/layout.php_ alla propria versione.

# Personalizzazione delle impostazioni

I dati principali non frequentemente modificabili sono amministrabili con l'applicazione di backend.
