<?php 

$mystudents=array();

$students=file("/var/schoolmesh/data/fixtures/studenti.csv");

foreach($students as $student)
   {   
		$ms= new Student();
		list($ms->firstname,$ms->lastname,$ms->username,$ms->sex,$ms->schoolclass)=explode(',',$student);
		array_push($mystudents, $ms);
	}

$schoolclasses=array("3ap","4ap", "5ap", "3bp", "4bp", "5bp");

foreach($schoolclasses as $schoolclass)
	{
		for($i=10;$i<=20;$i++)
			{
				$ms= new Student();
				$ms->sex = ($i & 1)? 'M':'F';
				$ms->username= (($ms->sex=='M')? 'john':'mary') . "$schoolclass.$i";
				$ms->firstname=  ($ms->sex=='M')? 'John':'Mary';
				$ms->lastname=  "Doe " . $schoolclass . "$i";
				$ms->schoolclass = $schoolclass;
			array_push($mystudents,$ms);
			}
	}
?>

sfGuardUser:
<?php foreach($mystudents as $ms): ?>
  <?php echo $ms->username ?>:
    username:   <?php echo $ms->username . "\n" ?>
    password:   <?php echo $ms->username. "p\n" ?>
    is_superadmin:  false
<?php endforeach; ?>

sfGuardUserProfile:
<?php foreach($mystudents as $ms): ?>
  <?php echo $ms->username ?>:
    user_id:        <?php echo $ms->username ."\n" ?>
    first_name:   <?php echo $ms->firstname . "\n" ?>
    last_name:    <?php echo $ms->lastname . "\n" ?>
    sex:            <?php echo $ms->sex . "\n" ?>
    role_id:       stu
<?php endforeach; ?>

Enrolment:
<?php foreach($mystudents as $ms): ?>
  <?php echo $ms->username ?>:
    user_id:        <?php echo $ms->username . "\n" ?>
    schoolclass_id:    <?php echo $ms->schoolclass . "\n" ?>
    year_id:         200809
<?php endforeach; ?>
