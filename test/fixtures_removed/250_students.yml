<?php 

$mystudents=array();

$students=file("/var/schoolmesh/data/fixtures/studenti.csv");

foreach($students as $student)
   {   
		$ms= new Student();
		list($ms->firstname,$ms->middlename,$ms->lastname,$ms->username,$ms->gender,$ms->pronunciation,$ms->schoolclass)=explode(',',$student);
		array_push($mystudents, $ms);
	}


/*
$schoolclasses=array("3ap","4ap", "5ap", "3bp", "4bp", "5bp");

foreach($schoolclasses as $schoolclass)
	{
		for($i=10;$i<=20;$i++)
			{
				$ms= new Student();
				$ms->gender = ($i & 1)? 'M':'F';
				$ms->username= (($ms->gender=='M')? 'john':'mary') . "$schoolclass.$i";
				$ms->firstname=  ($ms->gender=='M')? 'John':'Mary';
				$ms->lastname=  "Doe " . $schoolclass . "$i";
				$ms->schoolclass = $schoolclass;
			array_push($mystudents,$ms);
			}
	}
*/
?>

sfGuardUser:
<?php foreach($mystudents as $ms): ?>
  <?php echo $ms->username ?>:
    username:   <?php echo $ms->username . "\n" ?>
    password:   <?php echo $ms->username. "p\n" ?>
    is_superadmin:  false
<?php endforeach; ?>

sfGuardUserProfile:
<?php foreach($mystudents as $ms): ?>
  <?php echo $ms->username ?>:
    user_id:        <?php echo $ms->username ."\n" ?>
    first_name:   <?php echo $ms->firstname . "\n" ?>
    middle_name:   <?php echo $ms->middlename . "\n" ?>
    last_name:    <?php echo $ms->lastname . "\n" ?>
    gender:            <?php echo $ms->gender . "\n" ?>
    pronunciation:            <?php echo $ms->pronunciation . "\n" ?>
    role_id:       stu
    disk_set_soft_blocks_quota: 3000
    disk_set_hard_blocks_quota: 4000
    disk_set_soft_files_quota: 1000
    disk_set_hard_files_quota: 1500
    disk_used_blocks: 300
    disk_used_files: 100
    disk_updated_at: <?php echo time() . "\n" ?>
<?php endforeach; ?>

Enrolment:
<?php foreach($mystudents as $ms): ?>
  <?php echo $ms->username ?>:
    user_id:        <?php echo $ms->username . "\n" ?>
    schoolclass_id:    <?php echo $ms->schoolclass . "\n" ?>
    year_id:         200809
<?php endforeach; ?>
